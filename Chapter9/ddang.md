# 9. 코드를 재사용하고 일반화할 수 있도록 하라

- 다른 개발자가 이미 주어진 하위 문제를 해결했다면, 해당 문제에 대한 해결책을 재사용하는 것이 타당함
  - 시간 절약
  - 이미 테스트되고 실행되었기 때문에 버그 발생 가능성 낮아짐

## 9.1. 가정을 주의하라

- 코드 작성 시 가정을 하면 코드가 취약해지고 활용도가 낮아져 재사용하기에 안전하지 않을 수 있음
- 코드의 어느 부분에서 어떤 가정이 이루어졌는지 추적하기 어려움
- 가정은 코드 재사용 시 버그를 초래할 수 있음
- 불필요한 가정을 피해야 함
- 가정이 꼭 필요하다면 강제적으로 해야 함
  - 가정이 깨지지 않게 만들어야 함
    - 가정이 깨지면 컴파일되지 않는 방식으로 코드 작성
  - 오류 전달 기술 사용
    - 가정을 깨는 것이 불가능하게 만들 수 없는 경우, 오류 신호 전달 기술을 사용하여 신속하게 실패하도록 코드 작성
      - 실패와 오류는 명확하게 드러나도록

## 9.2. 전역 상태를 주의하라

- 전역 상태 또는 전역변수는 실행되는 프로그램 내의 모든 콘텍스트 사이에 공유됨
- 전역변수는 모든 콘텍스트에 영향을 미치기 때문에 전역변수를 사용할 때는 누구도 해당 코드를 다른 목적으로 재사용하지 않을 것이라는 암묵적인 가정을 전재
- 전역 상태를 갖는 코드는 재사용하기에 안전하지 않을 수 있음
  - 서로 다른 코드에서 모두 전역 상태에 접근하는 경우, 서로 간섭하게 됨

### 공유 상태에 의존성 주입하라

- 의존성 주입은 전역 상태를 사용하는 것보다 더 통제된 방법으로 서로 다른 클래스 간에 상태를 공유할 수 있도록 해줌
- 인스턴스를 필요한 클래스들에 주입하면, 어떤 코드에서 상태를 공유하고 어떤 코드에서 다른 상태를 사용할지 제어할 수 있음
  - 두 상태는 완전히 독립적이므로 서로 간섭하지 않음

## 9.3. 기본 반환값을 적절하게 사용하라

### 상위 수준의 코드에서 기본값을 제공하라

- 하위 계층에서의 가정보다 상위 계층에서의 가정이 유효할 가능성이 높음
- 기본값을 가정하는 코드의 계층이 낮을수록 그 가정이 적용되는 상위 계층이 많아짐
- 하위 계층에서는 단순히 null을 반환하고, 상위 계층에서 기본값을 구현하는 것이 나을 수 있음

## 9.4. 함수의 매개변수를 주목하라

### 필요 이상으로 매개변수를 받는 함수는 재사용하기 어려울 수 있다

- 함수가 객체 내에 포함된 모든 정보를 필요로 하는 경우에는 해당 함수가 객체를 매개변수로 받는 것이 타당함
- 그러나 함수가 한 두가지 정보만을 필요로 할 때는 객체를 매개변수로 사용하는 것은 코드의 재사용성을 해칠 수 있음

## 9.5. 제네릭의 사용을 고려하라

- 특정 유형에 의존하면 일반화를 제한함
- 제네릭을 사용하면 특정 타입에 대한 의존도를 없애고, 다른 타입을 다룰 때 재사용할 수 있음
