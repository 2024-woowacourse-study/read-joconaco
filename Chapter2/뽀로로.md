# 2. 추상화 계층

---

## 2.1 널값 및 의사코드 규약
많은 프로그래밍 언어에는 값이 없다는 개념을 가지고 있다.<br>
이 개념을 표현하기 위해 프로그래밍 언어는 `null`값을 사용한다.

>`null` 값을 사용하면 어떤 문제가 발생할 수 있을까? 🧐

개발자들이 변수에 액세스하기 전에 널값인지 확인하는 것을 자주 잊어버려 에러가 발생한다.

이를 해결하기 위해 자바에서는 `Optional`을 사용하는 것이 좋다.

```java
Optional<Element> getFifthElement(List<Element> elements) {
    if (elements.size() < 5) {
        return Optional.empty();
    }
    return Optional.of(elements.get(4));
}
```
---

## 2.2 왜 추상화 계층을 만드는가?
상위 문제를 하위 문제로 계속해서 나누어 내려가면서 추상화 계층을 만든다면, 
같은 층위 내에서는 쉽게 이해할 수 있는 몇 개의 개념만을 다루기 때문에 개별 코드는 복잡해 보이지 않는다.

### 2.2.1 추상화 계층 및 코드 품질의 핵심 요소
- 가독성
- 모듈화
- 재사용성 및 일반화성
- 테스트 용이성

---

## 2.3 코드의 계층

### 2.3.1 API 및 구현 세부 사항
코드를 작성할 때 고려해야 할 측면 두 가지
- 코드를 호출할 때 볼 수 있는 내용
  - 퍼블릭 클래스, 인터페이스 및 함수(메서드)
  - 이름, 입력 매개변수 및 반환 유형이 표현하고자 하는 개념
  - 코드 호출 시 코드를 올바르게 사용하기 위해 알아야 하는 추가 정보(예: 호출 순서)
- 코드를 호출할 때 볼 수 없는 내용
  - 구현 세부 사항

### 2.3.2 함수
하나의 함수가 여러 작업을 수행하면 코드를 이해하기 어려워진다.

함수가 하는 일을 다음 중 하나로 제한하면 좋은 전략이 될 수 있다.
- 단일 업무 수행
- 잘 명명된 다른 함수를 호출해서 더 복잡한 동작 구성

**함수를 작게 만들고 수행하는 작업을 명확하게 하면 코드의 `가독성`과 `재사용성`이 높아진다.**

### 2.3.3 클래스
개발자들은 단일 클래스의 이상적인 크기에 대해 논의하고 다음과 같은 많은 이론과 경험 법칙을 제시한다.

- 줄 수 : `한 클래스는 코드 300줄을 넘지 않아야 한다.`라는 가이드라인을 접할 수 있다.
- 응집력: 한 클래스 내의 모든 요소들이 얼마나 잘 속해 있는지 보여주는 척도
  - 순차적 응집력: 한 요소의 출력이 다른 요소에 대한 입력으로 필요할 때 발생
  - 기능적 응집력: 몇 가지 요소들이 모여서 하나의 일을 성취하는 데 기여할 때 발생
- 관심사의 분리: 시스템이 각각 별개의 문제를 다루는 개별 구성 요소로 분리

>하나의 클래스가 너무 커지면 어떤 문제가 발생할 수 있을까? 🧐

코드를 적절한 크기의 클래스로 쪼개지 않으면 너무 많은 개념을 한꺼번에 다루고, 가독성이 떨어지며
모듈화가 덜 이루어지고, 재사용과 일반화가 어렵고, 테스트하기도 어려워진다.

### 2.3.4 인터페이스
추상화 계층을 나타내기 위한 인터페이스를 정의함으로써 주어진 하위 문제를 해결하는 구현 클래스를 쉽게 교체할 수 있다.

따라서 코드가 모듈화되고 설정 가능하다. 

>그러면 모든 클래스에 인터페이스를 붙이는 것이 좋은가?? 🧐

모든 클래스에 인터페이스를 붙이는 것은 통제가 불가능하고, 불필요하게 복잡해지며, 이해와 수정이 어렵다.

인터페이스를 사용할 경우 그 장점이 확실한 상황에서는 인터페이스를 사용하되, 인터페이스만을 위한 인터페이스를 작성해서는 안된다.

### 2.3.5 층이 너무 얇아질 때
코드를 별개의 계층으로 세분화하면 다음과 같은 추가 비용이 발생한다.
- 클래스를 정의하거나 의존성을 새 파일로 임포트하려고 반복적으로 사용하는 코드로 인해 코드의 양이 늘어난다.
- 로직의 이해를 위해 파일이나 클래스를 따라갈 때 더 많은 노력이 필요하다.
- 인터페이스 뒤에 계층을 숨기게 되면 어떤 상황에서 어떤 구현이 사용되는지 파악하는 데 더 많은 노력이 필요하다. 이로 인해 로직을 이해하거나 디버깅하는 것이 어려워질 수 있다.

---

### 요약
- 코드를 깨끗하고 뚜렷한 추상화 계층으로 세분화하면 가독성, 모듈화, 재사용, 일반화 및 테스트 용이성이 향상된다.
- 특정 언어에 국한된 기능뿐만 아니라 함수, 클래스 및 인터페이스를 사용하여 코드를 추상화 계층으로 나눌 수 있다.
- 코드를 추상화 계층으로 분류하는 방법을 결정하려면 해결 중인 문제에 대한 판단과 지식을 사용해야 한다.
- 너무 비대한 계층 때문에 발생하는 문제는 너무 얇은 계층 때문에 발생하는 문제보다 더 심각하다. 확실하지 않은 경우에는 남용의 위험에도 불구하고 계층을 얇게 만드는 것이 좋다.
