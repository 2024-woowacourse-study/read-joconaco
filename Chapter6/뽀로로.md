# 6.예측 가능한 코드를 작성하라

---

## 6.1 매직값을 반환하지 말아야 한다
매직값은 함수의 정상적인 반환 유형에 적합하지만 특별한 의미를 가지고 있다.
매직값의 일반적인 예는 값이 없거나 오류가 발생했음을 나타내기 위해 -1을 반환하는 것

매직값은 버그를 유발할 수 있다.

> 해결책은??

널, 옵셔널 또는 오류를 반환

## 6.3 예상치 못한 부수 효과를 피하라
부수 효과는 어떤 함수의 호출이 함수 외부에 초래한 상태 변화를 의미한다.
함수가 반환하는 값 외에 다른 효과가 있다면 이는 부수 효과가 있는 것이다.

### 6.3.2 예기치 않은 부수 효과는 문제가 될 수 있다
- 부수 효과는 비용이 많이 들 수 있다
- 호출한 쪽의 가정을 깨트린다
- 다중 스레드 코드의 버그

### 6.3.3 해결책: 부수 효과를 피하거나 그 사실을 분명하게 하라
함수의 이름을 통해 부수 효과에 대해 분명하게 알 수 있다.

## 6.4 입력 매개변수를 수정하는 것에 주의하라

### 6.4.1 입력 매개변수를 수정하면 버그를 초래할 수 있다
입력 매개변수를 수정하는 것은 함수가 외부의 무언가에 영향을 미친다.

이를 해결하기 위한 최상의 방법은, 변경하기 전에 복사하는 것이다.

## 6.5 오해를 일으키는 함수는 작성하지 말라
매개변수가 없더라도 호출할 수 있고 매개변수가 없으면 아무 작업도 수행하지 않는 함수가 있다면,
이 함수가 수행하는 작업에 대해 오해의 소지가 있을 수 있다.

이를 해결하기 위해 중요한 입력은 필수 항목으로 만들어야 한다.

## 6.6 미래를 대비한 열거형 처리
미래에 추가될 수 있는 열것값을 암묵적으로 처리하는 것은 문제가 될 수 있다.

이를 해결하기 위해 모든 경우를 처리하는 스위치 문을 사용하라 

## 6.7 이 모든 것을 테스트로 해결할 수 는 없는가?
테스트는 매우 중요하다. 
하지만 직관적이지 않거나 예상을 벗어나는 코드에 숨어 있는 오류를 테스트만으로 방지하기 어렵다.

## 요약
- 다른 개발자가 작성하는 코드는 종종 우리가 작성하는 코드에 의존한다.
  - 다른 개발자가 우리 코드의 기능을 잘못 해석하거나 처리해야 하는 특수한 경우를 발견하지 못하면, 우리가 작성한 코드에 기반한 그 코드에서 버그가 발생할 가능성이 크다.
  - 코드를 호출하는 쪽에서 예상한대로 동작하기 위한 좋은 방법 중 하나는 중요한 세부 사항이 코드 계약의 명백한 부분에 포함되도록 하는 것이다.
- 우리가 사용하는 코드에 대해 허술하게 가정을 하면 예상을 벗어나는 또 다른 결과를 볼 수 있다.
  - 예를 들어 열거형에 추가되는 새 값을 예상하지 못한 경우다.
  - 의존해서 사용 중인 코드가 가정을 벗어날 경우, 코드 컴파일을 중지하거나 테스트가 실패하도록 하는 것이 중요하다.
- 테스트만으로는 예측을 벗어나는 코드의 문제를 해결할 수 없다. 다른 개발자가 코드를 잘못 해석하면 테스트해야 할 시나리오도 잘못 이해할 수 있다.
