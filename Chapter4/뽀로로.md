# 4. 오류

---

## 4.1 복구 가능성

### 4.1.1 복구 가능한 오류
복구 가능한 오류의 예
- 네트워크 오류
- 중요하지 않은 작업 오류

### 4.1.2 복구할 수 없는 오류
오류가 발생하고 시스템이 오류를 복구할 수 있는 합리적인 방법이 없을 때

### 4.1.4 호출하는 쪽에서 복구하고자 하는 오류에 대해 인지하도록 하라
코드 작성자가 함수에서 오류가 발생할 수 있다는 가능성을 호출하는 쪽에서 확실하게 인지하도록 해야 한다.

---

## 4.2 견고성 vs 실패

### 4.2.1 신속하게 실패하라
문제의 실제 발생 지점으로부터 가까운 곳에서 오류를 나타내는 것

오류가 발생했을 때 신속하게 실패하지 않으면, 오류는 실제 위치에서 멀리 떨어진 코드에서 발견된다. 
이렇게 되면 문제를 추적하고 해결하기 위해 많은 노력이 필요할 수 있다.

### 4.2.2 요란하게 실패하라
요란한 실패: 오류가 발생하는데도 불구하고 아무도 모르는 상황을 막고자 하는 것

이를 위한 가장 명백한 방법은 `예외를 발생해 프로그램이 중단되게 하는 것`이다.

### 4.2.4 오류를 숨기지 않음
오류를 숨기는 것은 복구할 수 있는 오류와 복구할 수 없는 오류 모두에 문제를 일으킨다.

오류를 숨길 수 있는 몇 가지 방법
- 기본값 반환
- 널 객체 패턴
- 아무것도 하지 않음

---

## 4.3 오류 전달 방법
- 명시적 방법
  - 검사 예외: 호출하는 쪽에서 예외 처리를 위한 코드를 작성하거나 자신의 함수 시그니처에 해당 예외 발생을 선언해야 한다.
  - 널 반환 유형
  - 옵셔널 반환 유형
  - 리절트 반환 유형: 오류 정보를 같이 전달하는 방법
  - 아웃컴 반환 유형: 호출하는 쪽에서 반환값을 강제적으로 확인
  - 스위프트 오류
- 암시적 방법
  - 비검사 예외: 오류가 발생할 수 있다는 것을 호출하는 쪽에서 인지하리라는 보장이 없다.
  - 매직값 반환: 특별한 의미를 부여하는 값 -> 예) 오류가 발생하면 -1을 반환 
  - 프로미스 또는 퓨처
  - 어서션
  - 체크
  - 패닉

---

## 4.5 호출하는 쪽에서 복구하기를 원할 수도 있는 오류의 전달

### 4.5.1 비검사 예외를 사용해야 한다는 주장
- 코드 구조 개선
- 개발자들이 무엇을 할 것인지에 대해서 실용적이어야 함

### 4.5.2 명시적 기법을 사용해야 한다는 주장
- 매끄러운 오류 처리
- 실수로 오류를 무시할 수 없다 
- 개발자들이 무엇을 할 것인지에 대해서 실용적이어야 함

---

## 요약
- 오류에는 두 가지 종류 
  - 시스템이 복구할 수 있는 오류
  - 시스템이 복구할 수 없는 오류
- 해당 코드에 의해 생성된 오류로부터 복구할 수 있는지 여부를 해당 코드를 호출하는 쪽에서만 알 수 있는 경우가 많다.
- 에러가 발생하면 신속하게 실패하는 것이 좋고, 에러를 복구할 수 없는 경우에는 요란하게 실패하는 것이 바람직하다.
- 오류를 숨기는 것은 바람직하지 않을 때가 많으며, 오류가 발생했다는 신호를 보내는 것이 바람직하다.
- 오류 전달 기법
  - 명시적 방법: 코드 계약의 명확한 부분. 호출하는 쪽에서는 오류가 발생할 수 있음을 인지한다.
  - 암시적 방법: 코드 계약의 세부 조항을 통해 오류에 대한 설명이 제공되거나 전혀 설명이 없을 수도 있다. 오류가 발생할 수 있다는 것을 호출하는 쪽에서 반드시 인지하는 것은 아니다.
- 복구할 수 없는 오류에 대해서는 암시적 오류 전달 기법을 사용해야 한다.
- 잠재적으로 복구할 수 있는 오류에 대해서는
  - 명시적 혹은 암시적 기법 중 어느 것을 사용할지에 대해서는 개발자들 사이에서도 일치되는 의견이 없다.
  - 필자의 의견으로는 명시적인 기법이 사용되어야 한다.
- 컴파일러 경고는 종종 코드에 문제가 있을 때 이에 대해 표시해준다. 이 경고에 주의를 기울이는 것이 바람직하다.
